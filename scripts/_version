#!/usr/bin/env bash
# _version <dir> <timestamp> <distdate> <sbv> <dbv> <machine_name> <uuid>

if [[ -z "$1" || -z "$2" || -z "$3" || -z "$4" || -z "$5" || -z "$6" || -z "$7" ]];	then
	echo "_version: Parameter Error"
	exit 1
fi

echo "Writing _Version.h"

cat > "$1/_Version.h" <<EOF
/**
 * THIS FILE IS AUTOMATICALLY GENERATED DO NOT MANUALLY EDIT IT.
 * IT DOES NOT GET COMMITTED TO THE REPOSITORY.
 */

#define MARLIN_BRANCH "1.1.9"
#define REQUIRED_CONFIGURATION_H_VERSION 010109
#define REQUIRED_CONFIGURATION_ADV_H_VERSION 010109

#define PROTOCOL_VERSION "1.0"
#define MACHINE_NAME "$6"
#define DEFAULT_MACHINE_UUID "$7"

#define BUILD_UNIX_DATETIME "$2"
#define STRING_DISTRIBUTION_DATE "$3"

#define SHORT_BUILD_VERSION "$4"
#define DETAILED_BUILD_VERSION "$5"

#define SOURCE_CODE_URL "https://github.com/aharshac/FWJulia2018Marlin"
#define WEBSITE_URL "https://fracktal.in"
EOF